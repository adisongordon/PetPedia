<!DOCTYPE html>
<html  lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Pedia</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/style.css}"/>

    <style>
        :root {
            /* COLORS */
            --white: #e9e9e9;
            --gray: #333;
            --blue: #0367a6;
            --lightblue: #008997;
        }

        .card {
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
            border-radius: 5px;
            width: 600px;
        }
        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }
        .btn {
            background-color: #0367a6;
            background-image: linear-gradient(90deg, #0367a6 0%, #008997 74%);
            border-radius: 20px;
            border: 1px solid #0367a6;
            color: #e9e9e9;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: bold;
            letter-spacing: 0.1rem;
            padding: 0.9rem 4rem;
            text-transform: uppercase;
            transition: transform 80ms ease-in;
        }

        .form > .btn {
            margin-top: 1.5rem;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn:focus {
            outline: none;
        }
    </style>

</head>
<body style="background-color:rgba(248,254,229,255)">
<div th:replace="~{fragments/header :: header}"></div>

<div class="container mt-5">
    <div class="card">
            <div class="px-2 py-2">
                <div class="Boxer">
                    <img src="/images/boxer.png"
                         width=200px
                         height=200px
                         alt="Oopsies">
                    <h2>Boxers</h2>
                    <p>The Boxer is a medium to large, short-haired dog breed of mastiff-type,
                        developed in Germany. The coat is smooth and tight-fitting; colors are fawn,
                        brindled, or white, with or without white markings.</p>
                </div>
                <div class="col-xs-1">
                    <p class="card-text" >Loyalty, affection, intelligence, work ethic,
                        and good looks: Boxers are the whole doggy package. Bright and alert,
                        sometimes silly, but always courageous, the Boxer has been among
                        America's most popular dog breeds for a very long time.</p>
                    <a class="btn">Read More</a>
                </div>
            </div>
    </div>
    <div class="card">
        <div class="px-2 py-2">
            <div class="Husky">
                <img src="/images/husky.png"
                     width=200px
                     height=200px
                     alt="">
                <h2>Huskies</h2>
                <p>Husky is a general term for a dog used in the polar regions, primarily and
                    specifically for work as sled dogs. It refers to a traditional northern type,
                    notable for its cold-weather tolerance and overall hardiness.</p>
            </div>
            <div class="col-xs-1">
                <p class="card-text" >Siberian Husky, a thickly coated, compact sled dog of medium size
                    and great endurance, was developed to work in packs, pulling light loads at
                    moderate speeds over vast frozen expanses. Sibes are friendly, fastidious, and dignified.
                    The graceful, medium-sized Siberian Husky's almond-shaped eyes can be either brown or
                    blue'and sometimes one of each'and convey a keen but amiable and even mischievous expression.</p>
                <a class="btn">Read More</a>
            </div>
        </div>
    </div>
</div>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script>
    const breeds_url = "https://api.thedogapi.com/v1/breeds";
    const img_search_url = "https://api.thecatapi.com/v1/images/search?breed_ids=";
    const api_key = "live_H4Ju1crGTZBGoy56AH0H9pACGoI4adjHB0jkJHvY8uuMWyOOBGpM940qClww1BQx";
    let breeds = [];

    fetch(breeds_url, { headers: { 'x-api-key': api_key }})
    .then((response) => {
        return response.json();
    })
    .then((data) => {
        data = data.filter(img=> img.image?.url!=null);
        breeds = data;

        for (let i = 0; i < breeds.length; i++) {
            if (!breeds[i].image) continue;
            document.getElementsByClassName('container mt-5')[0].appendChild(makeCard(breeds[i]));
        }
    });

    function makeCard(breedInfo) {
        var newCard = document.createElement('div');
        newCard.className = 'card';

        var pxpy = document.createElement('div');
        pxpy.className = 'px-2 py-2';
        newCard.appendChild(pxpy);

        var breedDiv = document.createElement('div');
        breedDiv.className = breedInfo.name;
        pxpy.appendChild(breedDiv);

        var breedImg = document.createElement('img');
        breedImg.src = getImgUrl(breedInfo.id);
        breedDiv.appendChild(breedImg);

        var breedHeader = document.createElement('h2');
        breedHeader.textContent = breedInfo.name;
        breedDiv.appendChild(breedHeader);

        var breedEmptyPara = document.createElement('p');
        breedEmptyPara.innerText = '';
        breedDiv.appendChild(breedEmptyPara);

        var breedcol_xs = document.createElement('div');
        breedcol_xs.className = 'col-xs-1';
        pxpy.appendChild(breedcol_xs);

        var breedPara = document.createElement('p');
        breedPara.className = 'card-text';
        breedPara.textContent = breedInfo.description;
        breedcol_xs.appendChild(breedPara);

        var breedButton = document.createElement('a');
        breedButton.className = 'btn';
        breedButton.innerText = 'Read More';
        breedcol_xs.appendChild(breedButton);

        return newCard;
    }

    function getImgUrl(breedId) {
        let imgUrl = '';
        fetch(img_search_url + breedId, { headers: { 'x-api-key': api_key }})
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            imgUrl = data.url;
        });
        return imgUrl;
    }
</script>


<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>